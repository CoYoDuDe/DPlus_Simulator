{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DPlus Simulator Einstellungen",
  "type": "object",
  "properties": {
    "gpio_pin": {
      "type": "integer",
      "minimum": 0,
      "description": "GPIO-Pin, der für die D+-Simulation genutzt wird."
    },
    "target_voltage": {
      "type": "number",
      "minimum": 0.0,
      "description": "Zielspannung in Volt."
    },
    "hysteresis": {
      "type": "number",
      "minimum": 0.0,
      "description": "Hystereseband in Volt für die Schaltlogik."
    },
    "activation_delay_seconds": {
      "type": "number",
      "minimum": 0.0,
      "description": "Verzögerung in Sekunden, bevor der GPIO aktiviert wird."
    },
    "deactivation_delay_seconds": {
      "type": "number",
      "minimum": 0.0,
      "description": "Verzögerung in Sekunden, bevor der GPIO deaktiviert wird."
    },
    "on_voltage": {
      "type": "number",
      "minimum": 0.0,
      "description": "Schaltschwelle für das Einschalten der D+-Simulation."
    },
    "off_voltage": {
      "type": "number",
      "minimum": 0.0,
      "description": "Schaltschwelle für das Ausschalten der D+-Simulation."
    },
    "on_delay_seconds": {
      "type": "number",
      "minimum": 0.0,
      "description": "Verzögerung in Sekunden bis zum Einschalten."
    },
    "off_delay_seconds": {
      "type": "number",
      "minimum": 0.0,
      "description": "Verzögerung in Sekunden bis zum Ausschalten."
    },
    "use_ignition": {
      "type": "boolean",
      "description": "Aktiviert den Zündplus-Eingang als zusätzliche Einschaltbedingung."
    },
    "ignition_gpio": {
      "type": "integer",
      "minimum": 0,
      "description": "GPIO-Pin für das Zündplus-Signal."
    },
    "ignition_pull": {
      "type": "string",
      "enum": ["up", "down", "none"],
      "description": "Pull-Up/-Down-Konfiguration für den Zündplus-Eingang.",
      "default": "down"
    },
    "output_mode": {
      "type": "string",
      "enum": ["gpio", "relay"],
      "description": "Legt fest, ob der Simulator einen GPIO oder ein Relay schaltet.",
      "default": "gpio"
    },
    "relay_channel": {
      "type": "string",
      "minLength": 0,
      "description": "Relay-Kanal aus der gpiosetup-Konfiguration (z. B. 4brelays/0).",
      "default": "4brelays/0"
    },
    "force_on": {
      "type": "boolean",
      "description": "Erzwingt ein dauerhaft eingeschaltetes Ausgangssignal.",
      "default": false
    },
    "force_off": {
      "type": "boolean",
      "description": "Erzwingt ein dauerhaft ausgeschaltetes Ausgangssignal.",
      "default": false
    },
    "dbus_bus": {
      "type": "string",
      "enum": ["system", "session"],
      "description": "Zu verwendender D-Bus."
    },
    "status_publish_interval": {
      "type": "number",
      "minimum": 0.2,
      "description": "Intervall in Sekunden für Status-Signale."
    },
    "service_path": {
      "type": "string",
      "description": "D-Bus-Service, aus dem die Spannung gelesen wird."
    },
    "voltage_path": {
      "type": "string",
      "description": "Objektpfad des Spannungswertes innerhalb des Dienstes."
    }
  },
  "required": [
    "gpio_pin",
    "target_voltage",
    "hysteresis",
    "activation_delay_seconds",
    "deactivation_delay_seconds",
    "on_voltage",
    "off_voltage",
    "on_delay_seconds",
    "off_delay_seconds",
    "use_ignition",
    "ignition_gpio",
    "ignition_pull",
    "output_mode",
    "relay_channel",
    "force_on",
    "force_off",
    "dbus_bus",
    "status_publish_interval",
    "service_path",
    "voltage_path"
  ],
  "additionalProperties": false
}
